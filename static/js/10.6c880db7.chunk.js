(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{108:function(e,t,a){"use strict";a.r(t);var n=a(61),r=a(21),s=a(33),u=a(29),o=a(45),c=a(41),i=a(44),l=a(0),b=a.n(l),h=a(23),d=a(153),p=(a(152),a(115)),m=a(42),f=function(e){var t=e.text,a=e.onClick,n=e.type,r=e.loading;return b.a.createElement("button",{type:n,className:"jelly-button",onClick:a},r?b.a.createElement("p",{className:"super-slide"},"Loading..."):b.a.createElement("p",{className:"super-slide"},t))};f.defaultProps={onClick:null,loading:!1};var g=f,v=function(e){return e.subscribtions.subs},w=function(e){return e.subscribtions.loading.getSubs},O=function(e){return e.subscribtions.loading.addSub},S=function(e){return e.subscribtions.loading.updateFavSub},C=function(){return d.b.error("\ud83e\udd2a Sub already exists",{position:"top-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},j=function(e){return d.b.success("\ud83e\udd1f Sub added! Total ammout:  ".concat(e),{position:"top-right",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},x=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),u=0;u<n;u++)r[u]=arguments[u];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",userID:""},a.warn=function(){return d.b.warn("\ud83d\ude24\ud83d\ude24\ud83d\ude24 Fill the field!!!",{position:"top-left",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},a.handleInputChange=function(e){var t=e.target,n=t.name,r=t.value;return a.setState(Object(m.a)({},n,r))},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state,n=t.name;t.userID;return""===n?a.warn():(a.props.handleSubmit(a.state),a.setState({name:"",userID:""}))},a}return Object(i.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.userID,n=this.props,r=n.handleFilterSubs,s=n.query,u=n.showFavorites,o=n.onChangeText,c=n.loading;return b.a.createElement("form",{onSubmit:this.handleFormSubmit,className:"sub-form"},b.a.createElement("input",{type:"text",autoComplete:"off",value:t,name:"name",onChange:this.handleInputChange,className:"sub-form__input",placeholder:"Add sub here"}),b.a.createElement("input",{type:"text",autoComplete:"off",value:a,name:"userID",onChange:this.handleInputChange,className:"sub-form__input",placeholder:"User id (optional)"}),b.a.createElement(g,{text:"Add new sub",loading:c,type:"submit"}),b.a.createElement("input",{type:"text",autoComplete:"off",value:s,placeholder:"filter sub here",name:"query",onChange:r,className:"sub-form__input"}),b.a.createElement(g,{text:o,type:"button",onClick:function(){return u()}}),b.a.createElement(d.a,{position:"top-right",autoClose:4e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnVisibilityChange:!0,draggable:!0,pauseOnHover:!0}))}}]),t}(l.Component),y=Object(h.b)(function(e){return{loading:O(e)}})(x),E=a(238),P=a(235),F=a(6),k=a.n(F),N=a(17),L=a(141),I=a(178),D=function(e){var t=e._id,a=e.name,n=e.date,r=e.favorite,s=e.handleFavChange,u=Object(l.useState)(!1),o=Object(L.a)(u,2),c=o[0],i=o[1],h=function(){var e=Object(N.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,s(t,r);case 3:setTimeout(Object(N.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i(!1);case 1:case"end":return e.stop()}},e)})),1e3);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return b.a.createElement(b.a.Fragment,null,b.a.createElement("div",null,b.a.createElement("h2",null,a),b.a.createElement("p",{className:"item-date"},"Added at: ",n)),b.a.createElement("button",{className:"image-wrapper",type:"button",onClick:function(){h()}},c?b.a.createElement(I.ClipLoader,{color:"#fff",loading:c}):b.a.createElement("img",{className:"item-image",src:r?"https://image.flaticon.com/icons/svg/148/148838.svg":"https://image.flaticon.com/icons/svg/149/149219.svg",alt:"fav"})))};D.defaultProps={favorite:!1};var A=D,T=function(e){var t=e.subscribers,a=e.handleFavChange;return b.a.createElement("ul",{className:"subs-list container"},b.a.createElement(E.a,{className:"subs-list container"},t.map(function(e){return b.a.createElement(P.a,{key:e._id,timeout:500,classNames:"bounce"},b.a.createElement("li",{className:"subs-list__item"},b.a.createElement(A,Object.assign({},e,{handleFavChange:a}))))})))},q=a(58),_=a(10),B=a(24),H=a.n(B),J="https://steam-subscribtions.herokuapp.com",M=function(e){return H.a.get("".concat(J,"/subscribers/").concat(e)).then(function(e){return e.data.subs})},U=function(e){return H.a.post("".concat(J,"/subscribers"),e).then(function(e){return e.data.addedSub})},V=function(e,t){return H.a.patch("".concat(J,"/subscribers/updateSub/").concat(e),t).then(function(e){return e.data.updatedSub})},z=a(25),G=1,K=20,Q=a(228),R=a(203),W=a.n(R),X=a(204),Y=a.n(X),Z=function(e){var t=e.maxPage,a=e.handleChangePage,n=e.currentPage;return b.a.createElement("div",{className:"pagination-wrapper"},b.a.createElement(Q.a,{className:"pagination-button",color:"primary",name:"prev",disabled:n===G,onClick:function(){return a("prev")}},b.a.createElement(W.a,{className:"pagination-button",disabled:n===G})),b.a.createElement("h1",null,"Page ",n," of ",t()),b.a.createElement(Q.a,{className:"pagination-button",name:"next",disabled:n===t(),onClick:function(){return a("next")}},b.a.createElement(Y.a,{className:"pagination-button",disabled:n===G})))},$=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.filter(function(e){return e.name.toLowerCase().includes(t.toLowerCase())||e.userID===t})},ee=function(e){function t(){var e,a;Object(s.a)(this,t);for(var u=arguments.length,i=new Array(u),l=0;l<u;l++)i[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).state={query:"",showFavorites:!1,onChangeText:"Show favourites",perPage:K,currentPage:G},a.handleChangePageOnFilter=function(){var e=a.state.currentPage;e>a.maxPage()&&a.setState({currentPage:a.maxPage()}),e<1&&a.setState({currentPage:1})},a.maxPage=function(){return Math.ceil(a.renderSubsList().length/K)},a.handleSubmit=function(e){var t=a.props,n=t.isAuth,s=t.addSub,u=t.subs,o=t.ownerId;n&&(console.log(o),u.find(function(t){return t.name.toLowerCase().trim()===e.name.toLocaleLowerCase().trim()||t.userID===e.userID.trim()})?C():s(Object(r.a)({favorite:!1,date:"".concat((new Date).toLocaleDateString()," ").concat((new Date).toLocaleTimeString())},e,{ownerId:o})).then(function(e){e&&j(u.length+1)}))},a.handleFilterSubs=function(e){return a.setState({query:e.target.value})},a.filterFavorites=function(){return a.props.subs.filter(function(e){return e.favorite})},a.showFavorites=function(){return a.setState(function(e){return{showFavorites:!e.showFavorites,onChangeText:e.showFavorites?"Show favourites":"Show all"}})},a.handleFavoriteChange=function(e,t){(0,a.props.updateFavSub)(e,{favorite:!t})},a.filteredSubs=function(e,t){return $(e,t)},a.showTotalAmmountOfSubs=function(){var e=a.props.subs,t=a.state,n=t.showFavorites,r=t.query;return n?a.filteredSubs(a.filterFavorites(),r).length:a.filteredSubs(e,r).length},a.renderSubsList=function(){var e=a.props.subs,t=a.state,n=t.showFavorites,r=t.query;return n?a.filteredSubs(a.filterFavorites(),r):a.filteredSubs(e,r)},a.handleChangePage=function(e){a.setState(function(t){return{currentPage:"next"===e?t.currentPage+1:t.currentPage-1}})},a.renderPaginationList=function(){var e=a.state,t=e.currentPage,r=e.perPage,s=t*r,u=s-r;return Object(n.a)(a.renderSubsList().reverse()).slice(u,s)},a}return Object(i.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isAuth,a=e.getSubs,n=e.ownerId;t&&a(n)}},{key:"componentDidUpdate",value:function(e,t){var a=this.props,n=a.isAuth,r=a.getSubs,s=a.ownerId,u=this.state.query;e.isAuth!==n&&n&&r(s),t.query!==u&&this.handleChangePageOnFilter()}},{key:"render",value:function(){var e=this.state,t=e.query,a=e.onChangeText,n=e.currentPage,r=this.props.subsLoad;return b.a.createElement("div",null,r&&b.a.createElement(p.a,{className:"material-subs-loader",color:"secondary"}),b.a.createElement(y,{handleSubmit:this.handleSubmit,query:t,handleFilterSubs:this.handleFilterSubs,showFavorites:this.showFavorites,onChangeText:a}),b.a.createElement("div",{className:"subs-length-wrap"},b.a.createElement("p",{className:"subs-length-text"},"Total length: ",this.showTotalAmmountOfSubs())),b.a.createElement(T,{subscribers:this.renderPaginationList(),handleFavChange:this.handleFavoriteChange}),this.renderSubsList().length>20&&b.a.createElement(Z,{currentPage:n,maxPage:this.maxPage,handleChangePage:this.handleChangePage}),b.a.createElement(d.a,null))}}]),t}(l.Component),te={getSubs:function(e){return function(){var t=Object(N.a)(k.a.mark(function t(a,n){var r,s;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Object(z.e)(n())){t.next=3;break}return t.abrupt("return");case 3:return Object(q.a)(r),a(Object(_.f)()),t.prev=5,t.next=8,M(e);case 8:s=t.sent,a(Object(_.g)(s)),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(5),console.error("error while getting subs: ".concat(t.t0)),a(Object(_.e)(t.t0));case 16:case"end":return t.stop()}},t,null,[[5,12]])}));return function(e,a){return t.apply(this,arguments)}}()},addSub:function(e){return function(){var t=Object(N.a)(k.a.mark(function t(a,n){var r,s;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Object(z.e)(n())){t.next=3;break}return t.abrupt("return");case 3:return Object(q.a)(r),a(Object(_.c)()),t.prev=5,t.next=8,U(e);case 8:return s=t.sent,t.abrupt("return",a(Object(_.d)(s)));case 12:t.prev=12,t.t0=t.catch(5),console.error("error while adding sub: ".concat(t.t0)),a(Object(_.b)(t.t0));case 16:case"end":return t.stop()}},t,null,[[5,12]])}));return function(e,a){return t.apply(this,arguments)}}()},updateFavSub:function(e,t){return function(){var a=Object(N.a)(k.a.mark(function a(n,r){var s,u;return k.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(s=Object(z.e)(r())){a.next=3;break}return a.abrupt("return");case 3:return Object(q.a)(s),n(Object(_.i)()),a.prev=5,a.next=8,V(e,t);case 8:u=a.sent,n(Object(_.j)(u)),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(5),n(Object(_.h)(a.t0)),console.error("error while updating favorite sub: ".concat(a.t0));case 16:case"end":return a.stop()}},a,null,[[5,12]])}));return function(e,t){return a.apply(this,arguments)}}()}};t.default=Object(h.b)(function(e){return{isAuth:Object(z.c)(e),subs:v(e),subsLoad:w(e),addSubLoad:O(e),updFavSubLoad:S(e),ownerId:Object(z.d)(e)}},te)(ee)}}]);
//# sourceMappingURL=10.6c880db7.chunk.js.map