(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,t,a){e.exports=a(165)},164:function(e,t,a){},165:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),u=a(8),s=a.n(u),o=a(83),i=a(25),c=a(198),l=a(40),d=a(35),p=a(41),h=a(30),f=function e(t,a){Object(h.a)(this,e),this.x=t,this.y=a,this.lifetime=0},b=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,u=new Array(n),s=0;s<n;s++)u[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(u)))).state={cHeight:0,cWidth:0},a.canvas=r.a.createRef(),a.componentDidMount=function(){a.setState({cHeight:2e3,cWidth:document.body.clientWidth}),window.addEventListener("resize",function(){a.setState({cHeight:document.body.clientHeight,cWidth:document.body.clientWidth})},!1),matchMedia("(pointer:fine)").matches&&a.startAnimation()},a.startAnimation=function(){var e=a.canvas.current,t=e.getContext("2d"),n=[];document.addEventListener("mousemove",function(t){var a=t.clientX,r=t.clientY;!function(e,t){var a=new f(e,t);n.push(a)}(a-e.offsetLeft,r-e.offsetTop)},!1);!function e(){t.clearRect(0,0,t.canvas.width,t.canvas.height);for(var a=0;a<n.length;++a){var r=n[a],u=void 0;if(u=void 0!==n[a-1]?n[a-1]:r,r.lifetime+=1,r.lifetime>700/60)n.shift();else{var s=r.lifetime/(700/60),o=7*(1-s);t.lineJoin="round",t.lineWidth=o;var i=Math.floor(190-190*s),c=Math.floor(210+210*s);t.strokeStyle="rgb(".concat(i,",").concat(0,",").concat(c),t.beginPath(),t.moveTo(u.x,u.y),t.lineTo(r.x,r.y),t.stroke(),t.closePath()}}requestAnimationFrame(e)}()},a.render=function(){var e=a.state,t=e.cHeight,n=e.cWidth;return r.a.createElement("canvas",{ref:a.canvas,className:"mouse-trail",width:n,height:t})},a}return Object(p.a)(t,e),t}(r.a.Component),m=a(56),v=a(202),g=a(192),S=a(193),E=a(194),y=a(199),w=a(195),C=a(196);function O(e){var t=e.submitPassword,a=Object(n.useState)(""),u=Object(m.a)(a,2),s=u[0],o=u[1];return r.a.createElement(v.a,{open:!0,"aria-labelledby":"form-dialog-title"},r.a.createElement(g.a,{id:"form-dialog-title"},"Sign in"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==s.trim()&&t(s)}},r.a.createElement(S.a,null,r.a.createElement(E.a,null,"To proceed please enter the password"),r.a.createElement(y.a,{autoFocus:!0,value:s,margin:"dense",label:"Password",type:"pasword",onChange:function(e){var t=e.target.value;return o(t)},fullWidth:!0})),r.a.createElement(w.a,null,r.a.createElement(C.a,{type:"submit",color:"primary"},"Jump"))))}var k=a(57),x=a(23),j=a(27),P=a(32),A=(a(70),a(53)),F=function(e){var t=e.text,a=e.onClick,n=e.type,u=e.loading;return r.a.createElement("button",{type:n,className:"jelly-button",onClick:a},u?r.a.createElement("p",{className:"super-slide"},"Loading..."):r.a.createElement("p",{className:"super-slide"},t))};F.defaultProps={onClick:null,loading:!1};var _=F,D=function(e){return e.subscribtions.subs},T=function(e){return e.subscribtions.loading.getSubs},N=function(e){return e.subscribtions.loading.addSub},L=function(e){return e.subscribtions.loading.updateFavSub},R=function(){return P.b.error("\ud83e\udd2a Sub already exists",{position:"top-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},U=function(e){return P.b.success("\ud83e\udd1f Sub added! Total ammout:  ".concat(e),{position:"top-right",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},B=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),u=0;u<n;u++)r[u]=arguments[u];return(a=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",userID:""},a.warn=function(){return P.b.warn("\ud83d\ude24\ud83d\ude24\ud83d\ude24 Fill the field!!!",{position:"top-left",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},a.handleInputChange=function(e){var t=e.target,n=t.name,r=t.value;return a.setState(Object(A.a)({},n,r))},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state,n=t.name;t.userID;return""===n?a.warn():(a.props.handleSubmit(a.state),a.setState({name:"",userID:""}))},a}return Object(p.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.userID,n=this.props,u=n.handleFilterSubs,s=n.query,o=n.showFavorites,i=n.onChangeText,c=n.loading;return r.a.createElement("form",{onSubmit:this.handleFormSubmit,className:"sub-form"},r.a.createElement("input",{type:"text",autoComplete:"off",value:t,name:"name",onChange:this.handleInputChange,className:"sub-form__input",placeholder:"Add sub here"}),r.a.createElement("input",{type:"text",autoComplete:"off",value:a,name:"userID",onChange:this.handleInputChange,className:"sub-form__input",placeholder:"User id (optional)"}),r.a.createElement(_,{text:"Add new sub",loading:c,type:"submit"}),r.a.createElement("input",{type:"text",autoComplete:"off",value:s,placeholder:"filter sub here",name:"query",onChange:u,className:"sub-form__input"}),r.a.createElement(_,{text:i,type:"button",onClick:function(){return o()}}),r.a.createElement(P.a,{position:"top-right",autoClose:4e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnVisibilityChange:!0,draggable:!0,pauseOnHover:!0}))}}]),t}(n.Component),I=Object(i.b)(function(e){return{loading:N(e)}})(B),q=a(203),H=a(201),W=a(13),M=a.n(W),Q=a(20),J=a(90),V=function(e){var t=e._id,a=e.name,u=e.date,s=e.favorite,o=e.handleFavChange,i=Object(n.useState)(!1),c=Object(m.a)(i,2),l=c[0],d=c[1],p=function(){var e=Object(Q.a)(M.a.mark(function e(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,o(t,s);case 3:setTimeout(Object(Q.a)(M.a.mark(function e(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:d(!1);case 1:case"end":return e.stop()}},e)})),1e3);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("h2",null,a),r.a.createElement("p",{className:"item-date"},"Added at: ",u)),r.a.createElement("button",{className:"image-wrapper",type:"button",onClick:function(){p()}},l?r.a.createElement(J.ClipLoader,{color:"#fff",loading:l}):r.a.createElement("img",{className:"item-image",src:s?"https://image.flaticon.com/icons/svg/148/148838.svg":"https://image.flaticon.com/icons/svg/149/149219.svg",alt:"fav"})))};V.defaultProps={favorite:!1};var z=V,G=function(e){var t=e.subscribers,a=e.handleFavChange;return r.a.createElement("ul",{className:"subs-list container"},r.a.createElement(q.a,{className:"subs-list container"},t.map(function(e){return r.a.createElement(H.a,{key:e._id,timeout:500,classNames:"bounce"},r.a.createElement("li",{className:"subs-list__item"},r.a.createElement(z,Object.assign({},e,{handleFavChange:a}))))})))},X=a(34),Y=a.n(X),K=function(e){Y.a.defaults.headers.common.Authorization="Bearer ".concat(e)},Z="SUBS_REQUEST_START",$="SUBS_REQUEST_SUCCESS",ee="SUBS_REQUEST_ERROR",te="ADD_SUB_REQUEST",ae="ADD_SUB_SUCCESS",ne="ADD_SUB_ERROR",re="UPDATE_FAV_SUB_REQUEST",ue="UPDATE_FAV_SUB_SUCCESS",se="UPDATE_FAV_SUB_ERROR",oe=function(e){return{type:$,payload:{subs:e}}},ie=function(e){return{type:ae,payload:{sub:e}}},ce="https://steam-subscribtions.herokuapp.com",le=function(e){return Y.a.post("".concat(ce,"/subscribers"),e).then(function(e){return e.data.addedSub})},de=function(e,t){return Y.a.patch("".concat(ce,"/subscribers/updateSub/").concat(e),t).then(function(e){return e.data.updatedSub})},pe=function(){var e=Object(Q.a)(M.a.mark(function e(t){var a;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.a.post("".concat(ce,"/auth/login"),t);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",console.error("error sign in",e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),he=function(e){return e.auth.isAuth},fe=function(e){return e.auth.token},be=function(e){return e.auth.loading},me=1,ve=20,ge=a(197),Se=a(92),Ee=a.n(Se),ye=a(93),we=a.n(ye),Ce=function(e){var t=e.maxPage,a=e.handleChangePage,n=e.currentPage;return r.a.createElement("div",{className:"pagination-wrapper"},r.a.createElement(ge.a,{className:"pagination-button",color:"primary",name:"prev",disabled:n===me,onClick:function(){return a("prev")}},r.a.createElement(Ee.a,{className:"pagination-button",disabled:n===me})),r.a.createElement("h1",null,"Page ",n," of ",t()),r.a.createElement(ge.a,{className:"pagination-button",name:"next",disabled:n===t(),onClick:function(){return a("next")}},r.a.createElement(we.a,{className:"pagination-button",disabled:n===me})))},Oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.filter(function(e){return e.name.toLowerCase().includes(t.toLowerCase())||e.userID===t})},ke=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),u=0;u<n;u++)r[u]=arguments[u];return(a=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={query:"",showFavorites:!1,onChangeText:"Show favourites",perPage:ve,currentPage:me},a.maxPage=function(){return Math.ceil(a.renderSubsList().length/ve)},a.handleSubmit=function(e){var t=a.props,n=t.isAuth,r=t.addSub,u=t.subs;if(n){if(u.find(function(t){return t.name.toLowerCase().trim()===e.name.toLocaleLowerCase().trim()||t.userID===e.userID.trim()}))return R();r(Object(x.a)({favorite:!1,date:"".concat((new Date).toLocaleDateString()," ").concat((new Date).toLocaleTimeString())},e)).then(function(e){e&&U(u.length+1)})}},a.handleFilterSubs=function(e){return a.setState({query:e.target.value})},a.filterFavorites=function(){return a.props.subs.filter(function(e){return e.favorite})},a.showFavorites=function(){return a.setState(function(e){return{showFavorites:!e.showFavorites,onChangeText:e.showFavorites?"Show favourites":"Show all"}})},a.handleFavoriteChange=function(e,t){(0,a.props.updateFavSub)(e,{favorite:!t})},a.filteredSubs=function(e,t){return Oe(e,t)},a.showTotalAmmountOfSubs=function(){var e=a.props.subs,t=a.state,n=t.showFavorites,r=t.query;return n?a.filteredSubs(a.filterFavorites(),r).length:a.filteredSubs(e,r).length},a.renderSubsList=function(){var e=a.props.subs,t=a.state,n=t.showFavorites,r=t.query;return n?a.filteredSubs(a.filterFavorites(),r):a.filteredSubs(e,r)},a.handleChangePage=function(e){a.setState(function(t){return{currentPage:"next"===e?t.currentPage+1:t.currentPage-1}})},a.renderPaginationList=function(){var e=a.state,t=e.currentPage,n=e.perPage,r=t*n,u=r-n;return Object(k.a)(a.renderSubsList().reverse()).slice(u,r)},a}return Object(p.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isAuth,a=e.getSubs;t&&a()}},{key:"componentDidUpdate",value:function(e,t){var a=this.props,n=a.isAuth,r=a.getSubs,u=this.state,s=u.query,o=u.currentPage;if(e.isAuth!==n&&n&&r(),t.query!==s){var i=this.renderSubsList().length<=20;o>this.maxPage()&&this.setState({currentPage:this.maxPage()}),(o<i||o<1)&&this.setState({currentPage:i})}}},{key:"render",value:function(){var e=this.state,t=e.query,a=e.onChangeText,n=e.currentPage,u=this.props.subsLoad;return r.a.createElement("div",null,u&&r.a.createElement(c.a,{className:"material-subs-loader",color:"secondary"}),r.a.createElement(I,{handleSubmit:this.handleSubmit,query:t,handleFilterSubs:this.handleFilterSubs,showFavorites:this.showFavorites,onChangeText:a}),r.a.createElement("div",{className:"subs-length-wrap"},r.a.createElement("p",{className:"subs-length-text"},"Total length: ",this.showTotalAmmountOfSubs())),r.a.createElement(G,{subscribers:this.renderPaginationList(),handleFavChange:this.handleFavoriteChange}),this.renderSubsList().length>20&&r.a.createElement(Ce,{currentPage:n,maxPage:this.maxPage,handleChangePage:this.handleChangePage}),r.a.createElement(P.a,null))}}]),t}(n.Component),xe={getSubs:function(){return function(){var e=Object(Q.a)(M.a.mark(function e(t,a){var n,r;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=fe(a())){e.next=3;break}return e.abrupt("return");case 3:return K(n),t({type:Z}),e.prev=5,e.next=8,Y.a.get("".concat(ce,"/subscribers")).then(function(e){return e.data.subs});case 8:r=e.sent,t(oe(r)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),console.error("error while getting subs: ".concat(e.t0)),t((u=e.t0,{type:ee,payload:{error:u}}));case 16:case"end":return e.stop()}var u},e,null,[[5,12]])}));return function(t,a){return e.apply(this,arguments)}}()},addSub:function(e){return function(){var t=Object(Q.a)(M.a.mark(function t(a,n){var r,u;return M.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=fe(n())){t.next=3;break}return t.abrupt("return");case 3:return K(r),a({type:te}),t.prev=5,t.next=8,le(e);case 8:return u=t.sent,t.abrupt("return",a(ie(u)));case 12:t.prev=12,t.t0=t.catch(5),console.error("error while adding sub: ".concat(t.t0)),a((s=t.t0,{type:ne,payload:{error:s}}));case 16:case"end":return t.stop()}var s},t,null,[[5,12]])}));return function(e,a){return t.apply(this,arguments)}}()},updateFavSub:function(e,t){return function(){var a=Object(Q.a)(M.a.mark(function a(n,r){var u,s;return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(u=fe(r())){a.next=3;break}return a.abrupt("return");case 3:return K(u),n({type:re}),a.prev=5,a.next=8,de(e,t);case 8:s=a.sent,n({type:ue,payload:{updatedSub:s}}),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(5),n((o=a.t0,{type:se,payload:{error:o}})),console.error("error while updating favorite sub: ".concat(a.t0));case 16:case"end":return a.stop()}var o},a,null,[[5,12]])}));return function(e,t){return a.apply(this,arguments)}}()}},je=Object(i.b)(function(e){return{isAuth:he(e),subs:D(e),subsLoad:T(e),addSubLoad:N(e),updFavSubLoad:L(e)}},xe)(ke),Pe="ACCESS_GRANTED",Ae="ACCESS_REQUEST",Fe="ACCESS_DENIED",_e=function(e){return{type:"ACCESS_GRANTED",payload:{token:e}}},De=function(e){return{type:Fe,payload:{err:e}}},Te=function(e){return function(){var t=Object(Q.a)(M.a.mark(function t(a){var n;return M.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:Ae}),t.prev=1,t.next=4,pe(e);case 4:n=t.sent,a(_e(n.token)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),a(De(t.t0));case 11:case"end":return t.stop()}},t,null,[[1,8]])}));return function(e){return t.apply(this,arguments)}}()},Ne={login:Te,refreshAdmin:function(){return function(){var e=Object(Q.a)(M.a.mark(function e(t,a){var n;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(fe(a())){e.next=3;break}return e.abrupt("return");case 3:return t({type:Ae}),e.prev=4,e.next=7,pe({password:"elkipalkitalki1"});case 7:n=e.sent,t(_e(n.token)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),t(De(e.t0));case 14:case"end":return e.stop()}},e,null,[[4,11]])}));return function(t,a){return e.apply(this,arguments)}}()}},Le=Object(i.b)(function(e){return{isAuth:he(e),loading:be(e)}},Ne)(function(e){var t=e.isAuth,a=e.login,u=e.refreshAdmin,s=e.loading;Object(n.useEffect)(function(){u()},[]);return r.a.createElement("div",{className:"stars-back"},r.a.createElement("div",{id:"stars"}),r.a.createElement("div",{id:"stars2"}),r.a.createElement("div",{id:"stars3"}),r.a.createElement(b,null),r.a.createElement(je,null),s?r.a.createElement(c.a,{className:"material-subs-loader",color:"secondary"}):!t&&r.a.createElement(O,{submitPassword:function(e){"elkipalkitalki1"===e&&a({password:e})}}))}),Re=a(15),Ue=(a(161),a(63)),Be=a(94),Ie=a.n(Be),qe=a(95),He=Object(Re.combineReducers)({isAuth:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case Pe:return!0;default:return e}},token:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case Pe:return n.token;default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case Ae:return!0;case Pe:case Fe:return!1;default:return e}}}),We={getSubs:!1,addSub:!1,updateFavSub:!1},Me=Object(Re.combineReducers)({subs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case $:return n.subs;case ae:return[].concat(Object(k.a)(e),[n.sub]);case ue:var r=n.updatedSub;return e.map(function(e){return e.userID===r.userID?r:e});default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We;switch((arguments.length>1?arguments[1]:void 0).type){case Z:return Object(x.a)({},e,{getSubs:!0});case $:case ee:return Object(x.a)({},e,{getSubs:!1});case te:return Object(x.a)({},e,{addSub:!0});case ae:case ne:return Object(x.a)({},e,{addSub:!1});case re:return Object(x.a)({},e,{updateFavSub:!0});case ue:case se:return Object(x.a)({},e,{updateFavSub:!1});default:return e}}}),Qe={key:"root",storage:Ie.a,whitelist:["token"]},Je=Object(Re.combineReducers)({auth:Object(Ue.a)(Qe,He),subscribtions:Me}),Ve=[qe.a],ze=Re.applyMiddleware.apply(void 0,Ve),Ge=Object(Re.createStore)(Je,ze),Xe=Object(Ue.b)(Ge);a(164);s.a.render(r.a.createElement(i.a,{store:Ge},r.a.createElement(o.a,{persistor:Xe},r.a.createElement(Le,null))),document.getElementById("root")),console.log("production")}},[[107,1,2]]]);
//# sourceMappingURL=main.e3aa0602.chunk.js.map