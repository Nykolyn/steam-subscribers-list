(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{135:function(e,t,n){"use strict";n.r(t);var a=n(33),r=n(80),s=n(27),u=n(43),o=n(39),c=n(56),i=n(53),l=n(57),d=n(0),m=n.n(d),b=n(19),f=n(222),p=n(35),h=n(393),v=n(394),g=(n(221),n(9)),w=n.n(g),S=n(24),O=n(54),E=n(391),x=n(389),j=function(e){return e.subscribtions.subs},y=function(e){return e.subscribtions.loading.getSubs},_=function(e){return e.subscribtions.loading.addSub},C=function(e){return e.subscribtions.date.sameDayAdded},k=function(e){return e.subscribtions.date.sameWeekAdded},F=function(e){return e.subscribtions.date.sameMonthAdded},N=function(){return f.b.error("\ud83e\udd2a Sub already exists",{position:"top-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},A=function(e){return f.b.success("\ud83e\udd1f Sub added! Total ammout:  ".concat(e),{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},P=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",userID:"",focused:!1,progress:10},n.warn=function(e){return f.b.warn("\ud83d\ude24\ud83d\ude24\ud83d\ude24 ".concat(e||"Fill the field!!!"," "),{position:"top-left",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},n.handleInputChange=function(e){var t=e.target,a=t.name,r=t.value;return n.setState(Object(O.a)({},a,r))},n.handleFormSubmit=function(e){e.preventDefault();var t=n.state,a=t.name,r=t.userID,s=a.trim(),u=r.trim();if(""!==s&&""!==u)return r.includes("/")?n.warn('Forgot to remove "/" '):(n.props.handleSubmit({name:s,userID:u}),n.setState({name:"",userID:""}));n.warn()},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.name,a=t.userID,r=this.props,s=r.handleFilterSubs,u=r.query,o=r.showFavorites,c=r.onChangeText,i=r.loading;return m.a.createElement("form",{onSubmit:this.handleFormSubmit,className:"sub-form"},m.a.createElement("input",{type:"text",autoComplete:"off",value:n,name:"name",onChange:this.handleInputChange,className:"sub-form__input",placeholder:"Add sub here"}),m.a.createElement("input",{type:"text",autoComplete:"off",value:a,name:"userID",onChange:this.handleInputChange,className:"sub-form__input",placeholder:"User id"}),m.a.createElement("input",{type:"text",autoComplete:"off",value:u,onFocus:function(){e.setState({progress:10}),clearTimeout(e.filterClearTimeout)},onBlur:function(){e.filterClearTimeout=setInterval(Object(S.a)(w.a.mark(function t(){return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.state.progress){t.next=5;break}return e.props.onReset(),e.setState({progress:10}),clearTimeout(e.filterClearTimeout),t.abrupt("return");case 5:return t.next=7,e.setState(function(e){return{progress:e.progress-1}});case 7:case"end":return t.stop()}},t)})),1e3)},autoFocus:!0,placeholder:"filter sub here",name:"query",onChange:s,className:"sub-form__input sub-form__filter-input"}),m.a.createElement(E.a,{width:"100%",mb:"10px"},m.a.createElement(x.a,{variant:"determinate",value:10*this.state.progress})),m.a.createElement("div",{className:"multi-button"},m.a.createElement("button",{type:"submit"},i?"Loading...":"Add"),m.a.createElement("button",{text:c,type:"button",onClick:function(){return o()}},c)),m.a.createElement(f.a,{position:"top-right",autoClose:4e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnVisibilityChange:!0,draggable:!0,pauseOnHover:!0}))}}]),t}(d.Component),D=Object(b.b)(function(e){return{loading:_(e)}})(P),I=n(187),L=n(390),T=n(392),q=n(143),B=n(382),M=n(344),z=n.n(M),H=n(343),U=n.n(H),J=n(341),W=n.n(J),R=n(342),V=n.n(R),X=n(22),Q=n(269),Y=n(396),G=n(72),K=n(7),Z=n(62),$=n(31),ee=n.n($),te="https://steam-subscribtions.herokuapp.com",ne=function(e){return ee.a.get("".concat(te,"/subscribers/").concat(e)).then(function(e){return e.data.subs})},ae=function(e){return ee.a.post("".concat(te,"/subscribers"),e).then(function(e){return e.data.newSub})},re=function(e){var t=e._id,n=Object(Z.a)(e,["_id"]);return ee.a.patch("".concat(te,"/subscribers/updateSub/").concat(t),n).then(function(e){return e.data.updatedSub})},se=n(51),ue=n(42),oe=Object(X.a)({root:{"& input.MuiInput-input":{color:"white"},"& label.Mui-focused":{color:"white"},"& .MuiInput-underline:after":{borderBottomColor:"white"}}})(T.a),ce=function(e){var t=e._id,n=e.name,a=e.date,r=e.visitedAt,s=e.favorite,u=e.updateSub,o=e.userID,c=Object(d.useState)(!1),i=Object(I.a)(c,2),l=i[0],b=i[1],f=Object(d.useState)(!1),p=Object(I.a)(f,2),h=p[0],v=p[1],g=Object(d.useState)(""),O=Object(I.a)(g,2),x=O[0],j=O[1],y=Object(d.useState)(!1),_=Object(I.a)(y,2),C=_[0],k=_[1],F=Object(d.useState)(!1),N=Object(I.a)(F,2),A=N[0],P=N[1],D=function(){var e=Object(S.a)(w.a.mark(function e(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,u({_id:t,favorite:!s});case 3:setTimeout(function(){b(!1)},1e3);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(S.a)(w.a.mark(function e(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.next=3,u({_id:t,visitedAt:"".concat((new Date).toLocaleDateString()," ").concat((new Date).toLocaleTimeString())});case 3:k(!1);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(S.a)(w.a.mark(function e(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(x.trim().length){e.next=2;break}return e.abrupt("return");case 2:return P(!0),e.next=5,u({_id:t,name:x.trim()});case 5:P(!1),v(!1);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return m.a.createElement("tr",{className:"subs-row ".concat(o?null:"no-id-row")},m.a.createElement(Y.a,{title:o,color:"#fff"},m.a.createElement("td",{className:"subs-row__item item_name"},m.a.createElement(E.a,{display:"flex",alignItems:"center",justifyContent:"space-between"},h?m.a.createElement(m.a.Fragment,null,m.a.createElement(oe,{onChange:function(e){var t=e.target.value;return j(t)}}),m.a.createElement(q.a,{disabled:A,onClick:T},m.a.createElement(W.a,{style:{color:"white",fontSize:"16px"}})),m.a.createElement(q.a,{onClick:function(){j(""),v(!1)}},m.a.createElement(V.a,{style:{color:"white",fontSize:"16px"}}))):m.a.createElement(m.a.Fragment,null,m.a.createElement(B.a,null,n),m.a.createElement(q.a,{onClick:function(){return v(!0)}},m.a.createElement(U.a,{style:{color:"white",fontSize:"16px"}})))))),m.a.createElement("td",{className:"subs-row__item item_date_visited"},r?m.a.createElement(m.a.Fragment,null,"".concat(Object(ue.d)(r),", ").concat(r.split(" ")[0]),m.a.createElement(q.a,{disabled:C,onClick:L},m.a.createElement(z.a,{style:{color:"white"}}))):m.a.createElement(m.a.Fragment,null,"- ,",m.a.createElement(q.a,{disabled:C,onClick:L},m.a.createElement(z.a,{style:{color:"white"}})))),m.a.createElement("td",{className:"subs-row__item item_date_added"},"".concat(Object(ue.d)(a),", ").concat(a)),m.a.createElement("td",{className:"subs-row__item item_favorite"},m.a.createElement("button",{type:"button",className:"image-wrapper",onClick:function(){return D()}},l?m.a.createElement(Q.ClipLoader,{color:"#fff",loading:l}):m.a.createElement("img",{className:"item-image",src:s?"https://image.flaticon.com/icons/svg/148/148838.svg":"https://image.flaticon.com/icons/svg/149/149219.svg",alt:"fav"}))))};ce.defaultProps={favorite:!1};var ie={updateSub:function(e){return function(){var t=Object(S.a)(w.a.mark(function t(n,a){var r,s;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Object(se.e)(a())){t.next=3;break}return t.abrupt("return");case 3:return Object(G.a)(r),n(K.i()),t.prev=5,t.next=8,re(e);case 8:return s=t.sent,t.next=11,n(K.j(s));case 11:return t.abrupt("return",t.sent);case 14:t.prev=14,t.t0=t.catch(5),n(K.h(t.t0)),console.error("error while updating sub: ".concat(t.t0));case 18:case"end":return t.stop()}},t,null,[[5,14]])}));return function(e,n){return t.apply(this,arguments)}}()}},le=Object(b.b)(null,ie)(ce);function de(){var e=Object(a.a)(["\n  width: 100%;\n  height: calc(100vh - 200px);\n  overflow-y: auto;\n  overflow-x: hidden;\n  margin-bottom: 10px;\n\n  /* width */\n  ::-webkit-scrollbar {\n    width: 2px;\n  }\n\n  /* Track */\n  ::-webkit-scrollbar-track {\n    background: transparent;\n  }\n\n  /* Handle */\n  ::-webkit-scrollbar-thumb {\n    background: #888;\n  }\n\n  /* Handle on hover */\n  ::-webkit-scrollbar-thumb:hover {\n    background: #555;\n  }\n"]);return de=function(){return e},e}function me(){var e=Object(a.a)(["\n  width: 100%;\n  font-size: 20px;\n  padding: 2rem;\n  color: #fff;\n  margin: 10px auto;\n"]);return me=function(){return e},e}function be(){var e=Object(a.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n"]);return be=function(){return e},e}var fe=p.a.div(be()),pe=p.a.table(me()),he=p.a.div(de()),ve=Object(b.b)(function(e){return{addSubLoading:_(e)}})(function(e){var t=e.subscribers,n=e.addSubLoading,a=Object(d.useState)(!1),r=Object(I.a)(a,2),s=r[0],u=r[1];return Object(d.useEffect)(function(){return u(!!n)},[n]),console.log("subscribers",t),t.length>0&&m.a.createElement("div",null,s&&m.a.createElement(fe,null,m.a.createElement(L.a,null)),m.a.createElement(pe,null,m.a.createElement("tbody",null,m.a.createElement("tr",{className:"subs-head"},m.a.createElement("th",{className:"subs-head__item item_name"},"Name"),m.a.createElement("th",{className:"subs-head__item item_date_visited"},"Last Visited"),m.a.createElement("th",{className:"subs-head__item item_date_added"},"Date Added"),m.a.createElement("th",{className:"subs-head__item item_favorite"},"Favorite")))),m.a.createElement(he,null,m.a.createElement(pe,null,m.a.createElement("tbody",{className:"subs-body"},t.map(function(e){return m.a.createElement(le,Object.assign({key:e._id},e))})))))}),ge=1,we=20;function Se(){var e=Object(a.a)(["\n  display: flex;\n  padding: 14px;\n  border-radius: 10px;\n  transition: all 0.4s;\n  align-items: center;\n  margin-bottom: 10px;\n  font-size: 24px;\n  justify-content: space-between;\n  width: 100%;\n  color: rgba(156, 146, 146, 0.616);\n  &:hover {\n    color: white;\n    transform: translateX(-10px) scale(1.1) rotateX(10deg);\n    box-shadow: 6px 6px 11px -2px rgba(107, 107, 107, 1);\n  }\n"]);return Se=function(){return e},e}function Oe(e){var t=e.showTotalAmmountOfSubs,n=e.sameDayAdded,a=e.sameWeekAdded,r=e.sameMonthAdded;return m.a.createElement("div",{className:"subs-length-wrap"},m.a.createElement(Ee,null,m.a.createElement("p",{className:"subs-length-text"},"Today added:"),m.a.createElement("span",{className:"subs-length-text__num"},n)),m.a.createElement(Ee,null,m.a.createElement("p",{className:"subs-length-text"},"Added this week:"),m.a.createElement("span",{className:"subs-length-text__num"},a)),m.a.createElement(Ee,null,m.a.createElement("p",{className:"subs-length-text"},"Added this month:"),m.a.createElement("span",{className:"subs-length-text__num"},r)),m.a.createElement(Ee,null,m.a.createElement("p",{className:"subs-length-text"},"Total:"),m.a.createElement("span",{className:"subs-length-text__num"},t)))}var Ee=p.a.div(Se());Oe.defaultProps={lastYearAdded:0};var xe=Object(b.b)(function(e){return{sameDayAdded:C(e),sameWeekAdded:k(e),sameMonthAdded:F(e)}})(Oe);function je(){var e=Object(a.a)(["\n  position: relative;\n  width: 66%;\n"]);return je=function(){return e},e}function ye(){var e=Object(a.a)(["\n  width: 30%;\n  /* margin: 0 auto; */\n  display: flex;\n  flex-direction: column;\n"]);return ye=function(){return e},e}function _e(){var e=Object(a.a)(["\n  display: flex;\n  width: 90%;\n  margin: 0 auto;\n  justify-content: space-between;\n"]);return _e=function(){return e},e}function Ce(){var e=Object(a.a)(["\n  text-align: center;\n"]);return Ce=function(){return e},e}var ke=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.filter(function(e){return e.name.toLowerCase().includes(t.toLowerCase())||e.userID===t})},Fe=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).state={query:"",showFavorites:!1,onChangeText:"Show favourites",perPage:we,currentPage:ge,preventSave:null},n.resetFilter=function(){return n.setState({query:""})},n.handleChangePageOnFilter=function(){var e=n.state.currentPage;e>n.maxPage()&&n.setState({currentPage:n.maxPage()}),e<1&&n.setState({currentPage:1})},n.maxPage=function(){return Math.ceil(n.renderSubsList().length/we)},n.handleSubmit=function(e){var t=n.props,a=t.isAuth,r=t.subs;if(a){if(r.find(function(t){return t.name.toLowerCase().trim()===e.name||t.userID===e.userID}))return N(),void n.setState({preventSave:e});n.sendUserData(e)}},n.sendUserData=function(e){var t=n.props,a=t.addSub,r=t.subs,u=t.ownerId,o="".concat((new Date).toLocaleDateString()," ").concat((new Date).toLocaleTimeString());return a(Object(s.a)({favorite:!1,date:o,visitedAt:o},e,{ownerId:u})).then(function(e){return e?A(r.length+1):N()})},n.handleFilterSubs=function(e){return n.setState({query:e.target.value.trim()})},n.filterFavorites=function(){return n.props.subs.filter(function(e){return e.favorite})},n.showFavorites=function(){return n.setState(function(e){return{showFavorites:!e.showFavorites,onChangeText:e.showFavorites?"Favorites":"All"}})},n.filteredSubs=function(e,t){return ke(e,t)},n.showTotalAmmountOfSubs=function(){var e=n.props.subs,t=n.state,a=t.showFavorites,r=t.query;return a?n.filteredSubs(n.filterFavorites(),r).length:n.filteredSubs(e,r).length},n.renderSubsList=function(){var e=n.props.subs,t=n.state,a=t.showFavorites,r=t.query;return a?n.filteredSubs(n.filterFavorites(),r):n.filteredSubs(e,r)},n.handleChangePage=function(e){n.setState({currentPage:e})},n.renderPaginationList=function(){var e=n.state,t=e.currentPage,a=e.perPage,s=t*a,u=s-a;return Object(r.a)(n.renderSubsList().reverse()).slice(u,s)},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(e,t){var n=this.state.query,a=this.props,r=a.ownerId,s=a.getSubs;e.ownerId!==r&&s(r),t.query!==n&&this.handleChangePageOnFilter()}},{key:"render",value:function(){var e=this,t=this.state,n=t.query,a=t.onChangeText,r=t.perPage,s=t.currentPage,u=this.props.subsLoad;return m.a.createElement(Ae,null,u&&m.a.createElement("div",{className:"rainbow-marker-loader"}),m.a.createElement(Pe,null,m.a.createElement(D,{handleSubmit:this.handleSubmit,query:n,handleFilterSubs:this.handleFilterSubs,showFavorites:this.showFavorites,onChangeText:a,onReset:this.resetFilter}),m.a.createElement(xe,{showTotalAmmountOfSubs:this.showTotalAmmountOfSubs()})),m.a.createElement(De,null,m.a.createElement(ve,{subscribers:this.renderPaginationList()}),this.renderSubsList().length>0&&m.a.createElement(Ne,null,m.a.createElement(h.a,{showQuickJumper:!0,defaultCurrent:Number(s),defaultPageSize:Number(r),total:this.renderSubsList().length,onChange:this.handleChangePage})),m.a.createElement(f.a,null)),m.a.createElement(v.a,{title:"Save Anyway?",bodyStyle:{padding:0},visible:Boolean(this.state.preventSave),onOk:function(){return e.sendUserData(e.state.preventSave).then(function(){return e.setState({preventSave:null})})},onCancel:function(){return e.setState({preventSave:null})}}))}}]),t}(d.Component),Ne=p.a.div(Ce()),Ae=p.a.div(_e()),Pe=p.a.div(ye()),De=p.a.div(je());Fe.defaultProps={ownerId:null};var Ie={getSubs:function(e){return function(){var t=Object(S.a)(w.a.mark(function t(n,a){var r,s;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Object(se.e)(a())){t.next=3;break}return t.abrupt("return");case 3:return Object(G.a)(r),n(K.f()),t.prev=5,t.next=8,ne(e);case 8:s=t.sent,n(K.g(s)),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(5),console.error("error while getting subs: ".concat(t.t0)),n(K.e(t.t0));case 16:case"end":return t.stop()}},t,null,[[5,12]])}));return function(e,n){return t.apply(this,arguments)}}()},addSub:function(e){return function(){var t=Object(S.a)(w.a.mark(function t(n,a){var r,s;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Object(se.e)(a())){t.next=3;break}return t.abrupt("return");case 3:return Object(G.a)(r),n(K.c()),t.prev=5,t.next=8,ae(e);case 8:return s=t.sent,t.abrupt("return",n(K.d(s)));case 12:t.prev=12,t.t0=t.catch(5),console.error("error while adding sub: ".concat(t.t0)),n(K.b(t.t0));case 16:case"end":return t.stop()}},t,null,[[5,12]])}));return function(e,n){return t.apply(this,arguments)}}()}};t.default=Object(b.b)(function(e){return{isAuth:Object(se.c)(e),subs:j(e),subsLoad:y(e),addSubLoad:_(e),ownerId:Object(se.d)(e)}},Ie)(Fe)}}]);
//# sourceMappingURL=10.880577fa.chunk.js.map