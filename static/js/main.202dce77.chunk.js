(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{155:function(e,t,a){},156:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),u=a.n(o),s=a(78),c=a(25),i=a(189),l=a(41),d=a(35),p=a(40),h=a(30),b=function e(t,a){Object(h.a)(this,e),this.x=t,this.y=a,this.lifetime=0},f=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(a=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={cHeight:0,cWidth:0},a.canvas=r.a.createRef(),a.componentDidMount=function(){a.setState({cHeight:2e3,cWidth:document.body.clientWidth}),window.addEventListener("resize",function(){a.setState({cHeight:document.body.clientHeight,cWidth:document.body.clientWidth})},!1),matchMedia("(pointer:fine)").matches&&a.startAnimation()},a.startAnimation=function(){var e=a.canvas.current,t=e.getContext("2d"),n=[];document.addEventListener("mousemove",function(t){var a=t.clientX,r=t.clientY;!function(e,t){var a=new b(e,t);n.push(a)}(a-e.offsetLeft,r-e.offsetTop)},!1);!function e(){t.clearRect(0,0,t.canvas.width,t.canvas.height);for(var a=0;a<n.length;++a){var r=n[a],o=void 0;if(o=void 0!==n[a-1]?n[a-1]:r,r.lifetime+=1,r.lifetime>700/60)n.shift();else{var u=r.lifetime/(700/60),s=7*(1-u);t.lineJoin="round",t.lineWidth=s;var c=Math.floor(190-190*u),i=Math.floor(210+210*u);t.strokeStyle="rgb(".concat(c,",").concat(0,",").concat(i),t.beginPath(),t.moveTo(o.x,o.y),t.lineTo(r.x,r.y),t.stroke(),t.closePath()}}requestAnimationFrame(e)}()},a.render=function(){var e=a.state,t=e.cHeight,n=e.cWidth;return r.a.createElement("canvas",{ref:a.canvas,className:"mouse-trail",width:n,height:t})},a}return Object(p.a)(t,e),t}(r.a.Component),m=a(56),v=a(194),g=a(185),S=a(186),E=a(187),y=a(190),w=a(188),C=a(191);function O(e){var t=e.submitPassword,a=Object(n.useState)(""),o=Object(m.a)(a,2),u=o[0],s=o[1];return r.a.createElement(v.a,{open:!0,"aria-labelledby":"form-dialog-title"},r.a.createElement(g.a,{id:"form-dialog-title"},"Sign in"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==u.trim()&&t(u)}},r.a.createElement(S.a,null,r.a.createElement(E.a,null,"To proceed please enter the password"),r.a.createElement(y.a,{autoFocus:!0,value:u,margin:"dense",label:"Password",type:"pasword",onChange:function(e){var t=e.target.value;return s(t)},fullWidth:!0})),r.a.createElement(w.a,null,r.a.createElement(C.a,{type:"submit",color:"primary"},"Jump"))))}var k=a(23),j=a(27),x=a(32),F=(a(67),a(53)),A=function(e){var t=e.text,a=e.onClick,n=e.type,o=e.loading;return r.a.createElement("button",{type:n,className:"jelly-button",onClick:a},o?r.a.createElement("p",{className:"super-slide"},"Loading..."):r.a.createElement("p",{className:"super-slide"},t))};A.defaultProps={onClick:null,loading:!1};var _=A,D=function(e){return e.subscribtions.subs},T=function(e){return e.subscribtions.loading.getSubs},N=function(e){return e.subscribtions.loading.addSub},R=function(e){return e.subscribtions.loading.updateFavSub},U=function(){return x.b.error("\ud83e\udd2a Sub already exists",{position:"top-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},L=function(e){return x.b.success("\ud83e\udd1f Sub added! Total ammout:  ".concat(e),{position:"top-right",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},B=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",userID:""},a.warn=function(){return x.b.warn("\ud83d\ude24\ud83d\ude24\ud83d\ude24 Fill the field!!!",{position:"top-left",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},a.handleInputChange=function(e){var t=e.target,n=t.name,r=t.value;return a.setState(Object(F.a)({},n,r))},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state,n=t.name;t.userID;return""===n?a.warn():(a.props.handleSubmit(a.state),a.setState({name:"",userID:""}))},a}return Object(p.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.userID,n=this.props,o=n.handleFilterSubs,u=n.query,s=n.showFavorites,c=n.onChangeText,i=n.loading;return r.a.createElement("form",{onSubmit:this.handleFormSubmit,className:"sub-form"},r.a.createElement("input",{type:"text",autoComplete:"off",value:t,name:"name",onChange:this.handleInputChange,className:"sub-form__input",placeholder:"Add sub here"}),r.a.createElement("input",{type:"text",autoComplete:"off",value:a,name:"userID",onChange:this.handleInputChange,className:"sub-form__input",placeholder:"User id (optional)"}),r.a.createElement(_,{text:"Add new sub",loading:i,type:"submit"}),r.a.createElement("input",{type:"text",autoComplete:"off",value:u,placeholder:"filter sub here",name:"query",onChange:o,className:"sub-form__input"}),r.a.createElement(_,{text:c,type:"button",onClick:function(){return s()}}),r.a.createElement(x.a,{position:"top-right",autoClose:4e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnVisibilityChange:!0,draggable:!0,pauseOnHover:!0}))}}]),t}(n.Component),I=Object(c.b)(function(e){return{loading:N(e)}})(B),P=a(195),H=a(193),W=a(12),q=a.n(W),M=a(19),Q=a(85),J=function(e){var t=e._id,a=e.name,o=e.date,u=e.favorite,s=e.handleFavChange,c=Object(n.useState)(!1),i=Object(m.a)(c,2),l=i[0],d=i[1],p=function(){var e=Object(M.a)(q.a.mark(function e(){return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,s(t,u);case 3:setTimeout(Object(M.a)(q.a.mark(function e(){return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:d(!1);case 1:case"end":return e.stop()}},e)})),1e3);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("h2",null,a),r.a.createElement("p",{className:"item-date"},"Added at: ",o)),r.a.createElement("button",{className:"image-wrapper",type:"button",onClick:function(){p()}},l?r.a.createElement(Q.ClipLoader,{color:"#fff",loading:l}):r.a.createElement("img",{className:"item-image",src:u?"https://image.flaticon.com/icons/svg/148/148838.svg":"https://image.flaticon.com/icons/svg/149/149219.svg",alt:"fav"})))};J.defaultProps={favorite:!1};var V=J,z=function(e){var t=e.subscribers,a=e.handleFavChange;return r.a.createElement("ul",{className:"subs-list container"},r.a.createElement(P.a,{className:"subs-list container"},t.map(function(e){return r.a.createElement(H.a,{key:e._id,timeout:500,classNames:"bounce"},r.a.createElement("li",{className:"subs-list__item"},r.a.createElement(V,Object.assign({},e,{handleFavChange:a}))))})))},G=a(34),X=a.n(G),Y=function(e){X.a.defaults.headers.common.Authorization="Bearer ".concat(e)},K="SUBS_REQUEST_START",Z="SUBS_REQUEST_SUCCESS",$="SUBS_REQUEST_ERROR",ee="ADD_SUB_REQUEST",te="ADD_SUB_SUCCESS",ae="ADD_SUB_ERROR",ne="UPDATE_FAV_SUB_REQUEST",re="UPDATE_FAV_SUB_SUCCESS",oe="UPDATE_FAV_SUB_ERROR",ue=function(e){return{type:Z,payload:{subs:e}}},se=function(e){return{type:te,payload:{sub:e}}},ce="https://steam-subscribtions.herokuapp.com",ie=function(e){return X.a.post("".concat(ce,"/subscribers"),e).then(function(e){return e.data.addedSub})},le=function(e,t){return X.a.patch("".concat(ce,"/subscribers/updateSub/").concat(e),t).then(function(e){return e.data.updatedSub})},de=function(){var e=Object(M.a)(q.a.mark(function e(t){var a;return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.a.post("".concat(ce,"/auth/login"),t);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",console.error("error sign in",e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),pe=function(e){return e.auth.isAuth},he=function(e){return e.auth.token},be=function(e){return e.auth.loading},fe=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={query:"",showFavorites:!1,onChangeText:"Show favourites"},a.handleSubmit=function(e){var t=a.props,n=t.isAuth,r=t.addSub,o=t.subs;if(n){if(o.find(function(t){return t.name.toLowerCase().trim()===e.name.toLocaleLowerCase().trim()||t.userID===e.userID.trim()}))return U();r(Object(k.a)({favorite:!1,date:"".concat((new Date).toLocaleDateString()," ").concat((new Date).toLocaleTimeString())},e)).then(function(e){e&&L(o.length+1)})}},a.handleFilterSubs=function(e){return a.setState({query:e.target.value})},a.filterFavorites=function(){return a.props.subs.filter(function(e){return e.favorite})},a.showFavorites=function(){return a.setState(function(e){return{showFavorites:!e.showFavorites,onChangeText:e.showFavorites?"Show favourites":"Show all"}})},a.handleFavoriteChange=function(e,t){(0,a.props.updateFavSub)(e,{favorite:!t})},a}return Object(p.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isAuth,a=e.getSubs;t&&a()}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.isAuth,n=t.getSubs;e.isAuth!==a&&a&&n()}},{key:"render",value:function(){var e=this.state,t=e.query,a=e.showFavorites,n=e.onChangeText,o=this.props,u=o.subs,s=o.subsLoad,c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.filter(function(e){return e.name.toLowerCase().includes(t.toLowerCase())||e.userID===t})}(u,t);return r.a.createElement("div",null,r.a.createElement(I,{handleSubmit:this.handleSubmit,query:t,handleFilterSubs:this.handleFilterSubs,showFavorites:this.showFavorites,onChangeText:n}),s?r.a.createElement(i.a,{className:"material-subs-loader",color:"secondary"}):a?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"subs-length-wrap"},r.a.createElement("p",{className:"subs-length-text"},"Total length: ",this.filterFavorites().length)),r.a.createElement(z,{subscribers:this.filterFavorites(),handleFavChange:this.handleFavoriteChange})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"subs-length-wrap"},r.a.createElement("p",{className:"subs-length-text"},"Total length: ",c.length)),r.a.createElement(z,{subscribers:c.reverse().slice(0,20),handleFavChange:this.handleFavoriteChange})),r.a.createElement(x.a,null))}}]),t}(n.Component),me={getSubs:function(){return function(){var e=Object(M.a)(q.a.mark(function e(t,a){var n,r;return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=he(a())){e.next=3;break}return e.abrupt("return");case 3:return Y(n),t({type:K}),e.prev=5,e.next=8,X.a.get("".concat(ce,"/subscribers")).then(function(e){return e.data.subs});case 8:r=e.sent,t(ue(r)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),console.error("error while getting subs: ".concat(e.t0)),t((o=e.t0,{type:$,payload:{error:o}}));case 16:case"end":return e.stop()}var o},e,null,[[5,12]])}));return function(t,a){return e.apply(this,arguments)}}()},addSub:function(e){return function(){var t=Object(M.a)(q.a.mark(function t(a,n){var r,o;return q.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=he(n())){t.next=3;break}return t.abrupt("return");case 3:return Y(r),a({type:ee}),t.prev=5,t.next=8,ie(e);case 8:return o=t.sent,t.abrupt("return",a(se(o)));case 12:t.prev=12,t.t0=t.catch(5),console.error("error while adding sub: ".concat(t.t0)),a((u=t.t0,{type:ae,payload:{error:u}}));case 16:case"end":return t.stop()}var u},t,null,[[5,12]])}));return function(e,a){return t.apply(this,arguments)}}()},updateFavSub:function(e,t){return function(){var a=Object(M.a)(q.a.mark(function a(n,r){var o,u;return q.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(o=he(r())){a.next=3;break}return a.abrupt("return");case 3:return Y(o),n({type:ne}),a.prev=5,a.next=8,le(e,t);case 8:u=a.sent,n({type:re,payload:{updatedSub:u}}),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(5),n((s=a.t0,{type:oe,payload:{error:s}})),console.error("error while updating favorite sub: ".concat(a.t0));case 16:case"end":return a.stop()}var s},a,null,[[5,12]])}));return function(e,t){return a.apply(this,arguments)}}()}},ve=Object(c.b)(function(e){return{isAuth:pe(e),subs:D(e),subsLoad:T(e),addSubLoad:N(e),updFavSubLoad:R(e)}},me)(fe),ge="ACCESS_GRANTED",Se="ACCESS_REQUEST",Ee="ACCESS_DENIED",ye=function(e){return{type:"ACCESS_GRANTED",payload:{token:e}}},we=function(e){return{type:Ee,payload:{err:e}}},Ce=function(e){return function(){var t=Object(M.a)(q.a.mark(function t(a){var n;return q.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:Se}),t.prev=1,t.next=4,de(e);case 4:n=t.sent,a(ye(n.token)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),a(we(t.t0));case 11:case"end":return t.stop()}},t,null,[[1,8]])}));return function(e){return t.apply(this,arguments)}}()},Oe={login:Ce,refreshAdmin:function(){return function(){var e=Object(M.a)(q.a.mark(function e(t,a){var n;return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(he(a())){e.next=3;break}return e.abrupt("return");case 3:return t({type:Se}),e.prev=4,e.next=7,de({password:"elkipalkitalki1"});case 7:n=e.sent,t(ye(n.token)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),t(we(e.t0));case 14:case"end":return e.stop()}},e,null,[[4,11]])}));return function(t,a){return e.apply(this,arguments)}}()}},ke=Object(c.b)(function(e){return{isAuth:pe(e),loading:be(e)}},Oe)(function(e){var t=e.isAuth,a=e.login,n=(e.refreshAdmin,e.loading);return r.a.createElement("div",{className:"stars-back"},r.a.createElement("div",{id:"stars"}),r.a.createElement("div",{id:"stars2"}),r.a.createElement("div",{id:"stars3"}),r.a.createElement(f,null),r.a.createElement(ve,null),n?r.a.createElement(i.a,{className:"material-subs-loader",color:"secondary"}):!t&&r.a.createElement(O,{submitPassword:function(e){"elkipalkitalki1"===e&&a({password:e})}}))}),je=a(14),xe=(a(152),a(60)),Fe=a(87),Ae=a.n(Fe),_e=a(88),De=Object(je.combineReducers)({isAuth:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case ge:return!0;default:return e}},token:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case ge:return n.token;default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case Se:return!0;case ge:case Ee:return!1;default:return e}}}),Te=a(89),Ne={getSubs:!1,addSub:!1,updateFavSub:!1},Re=Object(je.combineReducers)({subs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case Z:return n.subs;case te:return[].concat(Object(Te.a)(e),[n.sub]);case re:var r=n.updatedSub;return e.map(function(e){return e.userID===r.userID?r:e});default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne;switch((arguments.length>1?arguments[1]:void 0).type){case K:return Object(k.a)({},e,{getSubs:!0});case Z:case $:return Object(k.a)({},e,{getSubs:!1});case ee:return Object(k.a)({},e,{addSub:!0});case te:case ae:return Object(k.a)({},e,{addSub:!1});case ne:return Object(k.a)({},e,{updateFavSub:!0});case re:case oe:return Object(k.a)({},e,{updateFavSub:!1});default:return e}}}),Ue={key:"root",storage:Ae.a,whitelist:["token"]},Le=Object(je.combineReducers)({auth:Object(xe.a)(Ue,De),subscribtions:Re}),Be=[_e.a],Ie=je.applyMiddleware.apply(void 0,Be),Pe=Object(je.createStore)(Le,Ie),He=Object(xe.b)(Pe);a(155);u.a.render(r.a.createElement(c.a,{store:Pe},r.a.createElement(s.a,{persistor:He},r.a.createElement(ke,null))),document.getElementById("root")),console.log("production")},99:function(e,t,a){e.exports=a(156)}},[[99,1,2]]]);
//# sourceMappingURL=main.202dce77.chunk.js.map