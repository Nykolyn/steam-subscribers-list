(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"d",function(){return a}),n.d(t,"e",function(){return c}),n.d(t,"c",function(){return u}),n.d(t,"g",function(){return o}),n.d(t,"h",function(){return i}),n.d(t,"f",function(){return s}),n.d(t,"j",function(){return d}),n.d(t,"k",function(){return f}),n.d(t,"i",function(){return l}),n.d(t,"b",function(){return S});var r={ACCESS_REQUEST:"ACCESS_REQUEST",ACCESS_GRANTED:"ACCESS_GRANTED",ACCESS_DENIED:"ACCESS_DENIED",CLEAR_ERROR_MSG:"CREAR_ERROR_MSG"},a=function(){return{type:r.ACCESS_REQUEST}},c=function(e){return{type:r.ACCESS_GRANTED,payload:{user:e}}},u=function(e){return{type:r.ACCESS_DENIED,payload:{err:e}}},o=function(){return{type:r.ACCESS_REQUEST}},i=function(e){return{type:r.ACCESS_GRANTED,payload:{user:e}}},s=function(e){return{type:r.ACCESS_DENIED,payload:{err:e}}},d=function(){return{type:r.ACCESS_REQUEST}},f=function(e){return{type:r.ACCESS_GRANTED,payload:{user:e}}},l=function(e){return{type:r.ACCESS_DENIED,payload:{err:e}}},S=function(){return{type:r.CLEAR_ERROR_MSG}}},19:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a});var r=function(e,t){var n=JSON.stringify(t);return localStorage.setItem(e,n)},a=function(e){return JSON.parse(localStorage.getItem(e))}},21:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"c",function(){return u}),n.d(t,"d",function(){return o}),n.d(t,"b",function(){return i}),n.d(t,"e",function(){return s});var r=n(4),a=n.n(r);a.a.defaultFormat="DD.MM.YYYY HH:mm",a.a.updateLocale("en",{week:{dow:1}});var c=function(e,t){var n=a()(e,a.a.defaultFormat),r=a()(t,a.a.defaultFormat);return n.isSame(r,"day")},u=function(e,t){var n=a()(e,a.a.defaultFormat),r=a()(t,a.a.defaultFormat);return n.isSame(r,"week")},o=function(e,t){var n=a()(e,a.a.defaultFormat),r=a()(t,a.a.defaultFormat);return n.isSame(r,"year")},i=function(e,t){return function(e,t){return e.split(".").slice(1).join(" ")===t.split(".").slice(1).join(" ")}(e,t)},s=function(e){return a()(e,a.a.defaultFormat).fromNow()}},30:function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"d",function(){return a}),n.d(t,"e",function(){return c}),n.d(t,"b",function(){return u}),n.d(t,"a",function(){return o});var r=function(e){return e.auth.isAuth},a=function(e){return e.auth.user._id},c=function(e){return e.auth.token},u=function(e){return e.auth.loading},o=function(e){return e.auth.error}},37:function(e,t,n){"use strict";var r=n(3),a=n.n(r),c=n(11),u=n(55),o=n.n(u),i=n(1),s=n(18),d=n.n(s),f="https://steam-subscribtions.herokuapp.com",l=function(){var e=Object(c.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("".concat(f,"/auth/login"),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(c.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("".concat(f,"/auth/register"),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(c.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("".concat(f,"/user/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),p=n(48),h=n(19);n.d(t,"b",function(){return b}),n.d(t,"c",function(){return _}),n.d(t,"a",function(){return v});var b=function(e){return function(){var t=Object(c.a)(a.a.mark(function t(n){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(Object(i.d)()),t.prev=1,t.next=4,l(e);case 4:r=t.sent,e.rememberMe&&Object(h.b)("token",r.token),n(Object(i.e)(r)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(Object(i.c)(t.t0.response.data));case 12:case"end":return t.stop()}},t,null,[[1,9]])}));return function(e){return t.apply(this,arguments)}}()},_=function(e){return function(){var t=Object(c.a)(a.a.mark(function t(n){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(Object(i.j)()),t.prev=1,t.next=4,S(e);case 4:r=t.sent,e.rememberMe&&Object(h.b)("token",r.token),n(Object(i.k)(r)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(Object(i.i)(t.t0.response.data));case 12:case"end":return t.stop()}},t,null,[[1,9]])}));return function(e){return t.apply(this,arguments)}}()},v=function(){return function(){var e=Object(c.a)(a.a.mark(function e(t){var n,r,c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(h.a)("token")){e.next=3;break}return e.abrupt("return");case 3:return Object(p.a)(n),t(Object(i.g)()),e.prev=5,r=o()(n),e.next=9,E(r.id);case 9:c=e.sent,t(Object(i.h)(c)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),t(Object(i.f)(e.t0));case 16:case"end":return e.stop()}},e,null,[[5,13]])}));return function(t){return e.apply(this,arguments)}}()}},48:function(e,t,n){"use strict";var r=n(18),a=n.n(r);t.a=function(e){a.a.defaults.headers.common.Authorization="Bearer ".concat(e)}},49:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return s});var r=n(0),a=n.n(r),c=a.a.lazy(function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(8)]).then(n.bind(null,92))}),u=a.a.lazy(function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(9)]).then(n.bind(null,93))}),o=a.a.lazy(function(){return Promise.all([n.e(0),n.e(2),n.e(7),n.e(11)]).then(n.bind(null,94))}),i=[{path:"/auth/login",component:c,exact:!0},{path:"/auth/register",component:u,exact:!0}],s=[{path:"/subscribtions",component:o}]},5:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"f",function(){return a}),n.d(t,"g",function(){return c}),n.d(t,"e",function(){return u}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return i}),n.d(t,"b",function(){return s}),n.d(t,"i",function(){return d}),n.d(t,"j",function(){return f}),n.d(t,"h",function(){return l});var r={SUBS_REQUEST_START:"SUBS_REQUEST_START",SUBS_REQUEST_SUCCESS:"SUBS_REQUEST_SUCCESS",SUBS_REQUEST_ERROR:"SUBS_REQUEST_ERROR",ADD_SUB_REQUEST:"ADD_SUB_REQUEST",ADD_SUB_SUCCESS:"ADD_SUB_SUCCESS",ADD_SUB_ERROR:"ADD_SUB_ERROR",UPDATE_FAV_SUB_REQUEST:"UPDATE_FAV_SUB_REQUEST",UPDATE_FAV_SUB_SUCCESS:"UPDATE_FAV_SUB_SUCCESS",UPDATE_FAV_SUB_ERROR:"UPDATE_FAV_SUB_ERROR"},a=function(){return{type:r.SUBS_REQUEST_START}},c=function(e){return{type:r.SUBS_REQUEST_SUCCESS,payload:{subs:e}}},u=function(e){return{type:r.SUBS_REQUEST_ERROR,payload:{error:e}}},o=function(){return{type:r.ADD_SUB_REQUEST}},i=function(e){return{type:r.ADD_SUB_SUCCESS,payload:{sub:e}}},s=function(e){return{type:r.ADD_SUB_ERROR,payload:{error:e}}},d=function(){return{type:r.UPDATE_FAV_SUB_REQUEST}},f=function(e){return{type:r.UPDATE_FAV_SUB_SUCCESS,payload:{updatedSub:e}}},l=function(e){return{type:r.UPDATE_FAV_SUB_ERROR,payload:{error:e}}}},57:function(e,t,n){e.exports=n(91)},90:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(22),u=n.n(c),o=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function i(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var s=n(23),d=n(15),f=n(17),l=n(3),S=n.n(l),E=n(11),p=n(32),h=n(35),b=n(33),_=n(36),v=n(24),m=function e(t,n){Object(v.a)(this,e),this.x=t,this.y=n,this.lifetime=0},A=function(e){function t(){var e,n;Object(v.a)(this,t);for(var r=arguments.length,c=new Array(r),u=0;u<r;u++)c[u]=arguments[u];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(c)))).state={cHeight:0,cWidth:0},n.canvas=a.a.createRef(),n.componentDidMount=function(){n.setState({cHeight:2e3,cWidth:document.body.clientWidth}),window.addEventListener("resize",function(){n.setState({cHeight:document.body.clientHeight,cWidth:document.body.clientWidth})},!1),matchMedia("(pointer:fine)").matches&&n.startAnimation()},n.startAnimation=function(){var e=n.canvas.current,t=e.getContext("2d"),r=[];document.addEventListener("mousemove",function(t){var n=t.clientX,a=t.clientY;!function(e,t){var n=new m(e,t);r.push(n)}(n-e.offsetLeft,a-e.offsetTop)},!1);!function e(){t.clearRect(0,0,t.canvas.width,t.canvas.height);for(var n=0;n<r.length;++n){var a=r[n],c=void 0;if(c=void 0!==r[n-1]?r[n-1]:a,a.lifetime+=1,a.lifetime>700/60)r.shift();else{var u=a.lifetime/(700/60),o=7*(1-u);t.lineJoin="round",t.lineWidth=o;var i=Math.floor(190-190*u),s=Math.floor(210+210*u);t.strokeStyle="rgb(".concat(i,",").concat(0,",").concat(s),t.beginPath(),t.moveTo(c.x,c.y),t.lineTo(a.x,a.y),t.stroke(),t.closePath()}}requestAnimationFrame(e)}()},n.render=function(){var e=n.state,t=e.cHeight,r=e.cWidth;return a.a.createElement("canvas",{ref:n.canvas,className:"mouse-trail",width:r,height:t})},n}return Object(_.a)(t,e),t}(a.a.Component),U=n(53),R=n(30),C=function(e){var t=e.component,n=e.isAuth,r=Object(U.a)(e,["component","isAuth"]);return a.a.createElement(d.b,Object.assign({},r,{render:function(e){return n?a.a.createElement(t,e):a.a.createElement(d.a,{to:"/signin"})}}))};C.defaultProps={isAuth:null};var y=Object(f.b)(function(e){return{isAuth:Object(R.c)(e)}})(C),D=n(37),g=n(49),O=n(19),T=a.a.lazy(function(){return Promise.all([n.e(0),n.e(1),n.e(10)]).then(n.bind(null,235))}),w={refreshUser:D.a},j=Object(f.b)(null,w)(function(e){var t=e.refreshUser,n=Object(r.useState)(!1),c=Object(p.a)(n,2),u=c[0],o=c[1],i=function(){var e=Object(E.a)(S.a.mark(function e(){return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(O.a)("token")){e.next=3;break}return e.abrupt("return");case 3:return o(!0),e.next=6,t();case 6:setTimeout(function(){o(!1)},1e3);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)(function(){i()},[]);return a.a.createElement("div",{className:"stars-back"},a.a.createElement("div",{id:"stars"}),a.a.createElement("div",{id:"stars2"}),a.a.createElement("div",{id:"stars3"}),a.a.createElement(A,null),a.a.createElement(r.Suspense,{fallback:a.a.createElement("div",{className:"rainbow-marker-loader"})},a.a.createElement(d.d,null,g.b.map(function(e){return a.a.createElement(y,{key:e.path,path:e.path,component:e.component,exact:e.exact})}),u?a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"rainbow-marker-loader"})):a.a.createElement(d.b,{path:"/auth",component:T}),a.a.createElement(d.a,{to:"/auth"}))))}),k=n(10),B=(n(88),n(56)),x=n(1),Q=Object(k.combineReducers)({isAuth:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case x.a.ACCESS_GRANTED:return!0;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case x.a.ACCESS_GRANTED:return r.user.user;default:return e}},token:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case x.a.ACCESS_GRANTED:return r.user.token;default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case x.a.ACCESS_REQUEST:return!0;case x.a.ACCESS_GRANTED:case x.a.ACCESS_DENIED:return!1;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case x.a.ACCESS_DENIED:return r.err.message;case x.a.ACCESS_GRANTED:case x.a.CLEAR_ERROR_MSG:return null;default:return e}}}),F=n(16),N=n(50),P=n(5),W=n(21),M={getSubs:!1,addSub:!1,updateFavSub:!1},G={sameDayAdded:0,sameWeekAdded:0,sameMonthAdded:0,lastYearAdded:0},V=Object(k.combineReducers)({loading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;switch((arguments.length>1?arguments[1]:void 0).type){case P.a.SUBS_REQUEST_START:return Object(F.a)({},e,{getSubs:!0});case P.a.SUBS_REQUEST_SUCCESS:case P.a.SUBS_REQUEST_ERROR:return Object(F.a)({},e,{getSubs:!1});case P.a.ADD_SUB_REQUEST:return Object(F.a)({},e,{addSub:!0});case P.a.ADD_SUB_SUCCESS:case P.a.ADD_SUB_ERROR:return Object(F.a)({},e,{addSub:!1});case P.a.UPDATE_FAV_SUB_REQUEST:return Object(F.a)({},e,{updateFavSub:!0});case P.a.UPDATE_FAV_SUB_SUCCESS:case P.a.UPDATE_FAV_SUB_ERROR:return Object(F.a)({},e,{updateFavSub:!1});default:return e}},subs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case P.a.SUBS_REQUEST_SUCCESS:return r.subs;case P.a.ADD_SUB_SUCCESS:return[].concat(Object(N.a)(e),[r.sub]);case P.a.UPDATE_FAV_SUB_SUCCESS:var a=r.updatedSub;return e.map(function(e){return e.userID===a.userID?a:e});default:return e}},date:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case P.a.SUBS_REQUEST_SUCCESS:var a=(new Date).toLocaleDateString(),c=0,u=0,o=0,i=0;return r.subs.forEach(function(e){var t=e.date.split(" ")[0];Object(W.a)(a,t)&&(c+=1),Object(W.b)(a,t)&&(u+=1),Object(W.c)(a,t)&&(o+=1),Object(W.d)(a,t)||(i+=1)}),{sameDayAdded:c,sameWeekAdded:o,sameMonthAdded:u,lastYearAdded:i};case P.a.ADD_SUB_SUCCESS:return{sameDayAdded:e.sameDayAdded+1,sameWeekAdded:e.sameWeekAdded+1,sameMonthAdded:e.sameMonthAdded+1};default:return e}}}),I=Object(k.combineReducers)({auth:Q,subscribtions:V}),L=[B.a],H=k.applyMiddleware.apply(void 0,L),Y=Object(k.createStore)(I,H),z=function(){return a.a.createElement(f.a,{store:Y},a.a.createElement(s.a,{basename:"/"},a.a.createElement(d.b,{component:j})))};n(90);u.a.render(a.a.createElement(z,null),document.getElementById("root")),console.log("production"),function(e){if("serviceWorker"in navigator){if(new URL("/steam-subscribers-list",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/steam-subscribers-list","/service-worker.js");o?(function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then(function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):i(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):i(t,e)})}}()}},[[57,5,6]]]);
//# sourceMappingURL=main.ed22e89f.chunk.js.map